(function(){console.log("[Whisper Extension] Content script loaded.");window.postMessage({source:"WHISPER_EXTENSION",type:"EXTENSION_READY"},window.origin);window.addEventListener("message",e=>{if(e.source===window&&e.data.type&&e.data.source==="WHISPER_CLIENT"){console.log("[Whisper Extension] Received message from page:",e.data);const{type:o,payload:s}=e.data;if(o==="PING"){window.postMessage({source:"WHISPER_EXTENSION",type:"PONG",payload:{version:"1.0.0"}},window.origin);return}chrome.runtime.sendMessage(s,r=>{window.postMessage({source:"WHISPER_EXTENSION",type:o+"_RESPONSE",payload:r,error:chrome.runtime.lastError?chrome.runtime.lastError.message:null},window.origin)})}});
})()
